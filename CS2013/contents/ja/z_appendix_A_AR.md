
# アーキテクチャと構成 (AR)

コンピューティングの専門家はコンピュータを、プログラムを魔法のように実行するブラックボックスと見なすべきではありません。「アーキテクチャと構成」という知識領域は、[システム基礎 (SF)](./z_appendix_A_SF.md)に基づいており、すべての計算機が基づくハードウェア環境や、それが上位のソフトウェア層に提供するインターフェースをより深く理解するためのものです。学生は、コンピュータシステムの機能的構成要素、それらの特性、性能、相互作用を認識し深く理解する必要があります。特に、並列性を活用して現在そして将来の性能向上を維持するという課題について理解することが重要です。学生は、並列性とレイテンシを意識して高い性能を達成するプログラムを開発できるようコンピュータアーキテクチャを理解する必要があります。使用するシステムを選択する際に、CPUクロック速度、命令あたりのサイクル数、メモリサイズ、平均メモリアクセス時間など、さまざまな要素間のトレードオフを理解できる必要があります。

これらのトピックに対して指定された学習到達目標は、主に選択必修に対応しており、学生に最低16時間のコンピュータアーキテクチャのみを必須とする課程を可能にするよう意図されています。最低限の内容以上を教えたい課程の場合、同じARトピック2講座でより高度なレベルを扱うことができます。課程で選択科目のトピックをカバーしたい場合は、2講座で導入まで、または3講座目でより包括的に扱うことができます。

**AR. アーキテクチャと構成 (必修 0時間, 選択必修 16時間)**

| 知識単位 | 必修時間 | 選択必修時間 | 含選択科目 |
| -------- | -------- | ------------ | ---------- |
| [AR/ディジタル回路とディジタルシステム](#arディジタル回路とディジタルシステム) | | 3 | N |
| [AR/機械レベルでのデータの表現](#ar機械レベルでのデータの表現) | | 3 | N |
| [AR/アセンブリ言語レベルでのコンピュータの構成](#arアセンブリ言語レベルでのコンピュータの構成) | | 6 | N |
| [AR/メモリシステムの構成とアーキテクチャ](#arメモリシステムの構成とアーキテクチャ) | | 3 | N |
| [AR/インターフェースと通信](#arインターフェースと通信) | | 1 | N |
| [AR/機能別のハードウェア構成](#ar機能別のハードウェア構成) | | | Y |
| [AR/マルチプロセッシングとその構成の選択肢](#arマルチプロセッシングとその構成の選択肢) | | | Y |
| [AR/性能向上のための技術](#ar性能向上のための技術) | | | Y |


## AR/ディジタル回路とディジタルシステム
*[選択必修 3時間]*

**トピック:**

* コンピュータアーキテクチャの概要と歴史
* 組み合わせ回路と順序回路 / これら回路の基礎的な構成要素としての FPGA (Field Programmable Gate Arrays)
* 複数の表現/解釈のレイヤー（ハードウェアもまた一つのレイヤー）
* ハードウェアやアーキテクチャ表現を処理するコンピュータ支援設計ツール
* レジスタ転送表記/ハードウェア記述言語（Verilog/VHDL）
* 物理的制約（ゲート遅延、ファンイン、ファンアウト、エネルギー/電力）

**学習到達目標:**

1. 真空管からVLSIまでのコンピュータ技術の進化と、メインフレームコンピュータアーキテクチャからウェアハウススケールコンピュータの構成への進化を説明する。[知識]
2. 現代のコンピュータアーキテクチャがマルチコアに向かっていることと、すべてのハードウェアシステムに並列性が内在していることを理解する。[知識]
3. 「消費電力の壁」がプロセッサ性能のさらなる向上と並列性の活用にどのような影響を与えるかを説明する。[知識]
4. コンピュータ機能には多くの同等な表現（論理式やゲートなど）があることを説明し、単純な組み合わせ回路や順序回路の機能を数学的表現で記述できるようになる。[知識]
5. コンピュータの基本的な構成要素を設計する：算術論理演算装置（ゲートレベル）、レジスタ（ゲートレベル）、中央演算処理装置（レジスタ転送レベル）、メモリ（レジスタ転送レベル）。[使用]
6. CADツールを使用して、キャプチャ、合成、シミュレーションを評価し、単純なコンピュータ設計の単純な構成要素（例：算術論理演算装置、レジスタ、レジスタ間転送）を評価する。[使用]
7. 論理回路レベルで実装された単純なプロセッサの機能およびタイミング図の動作を評価する。[評価]


## AR/機械レベルでのデータの表現
*[選択必修 3時間]*

**トピック:**

* ビット・バイト・ワード
* 数値データ表現と基数
* 固定小数点と浮動小数点システム
* 符号付きおよび2の補数表現
* 非数値データの表現（文字コード、グラフィカルデータ）
* レコードと配列の表現

**学習到達目標:**

1. コンピューターでは、命令を含むすべてのものがデータである理由を説明する。[知識]
2. 数値データを表現するために複数の異なるフォーマットを使用する理由を説明する。[知識]
3. 符号付き整数が、符号付き絶対値表現と2の補数表現でどのように格納されるかを説明する。[知識]
4. 固定長の数値表現が精度と精密さにどのような影響を与えるかを説明する。[知識]
5. 文字、文字列、レコード、配列などの非数値データの内部表現を説明する。[知識]
6. 数値データをある形式から別の形式に変換する。[使用]
7. 文字列処理と操作のためのアセンブリ/機械レベルの簡単なプログラムを作成する。[使用]



## AR/アセンブリ言語レベルでのコンピュータの構成
*[選択必修 6時間]*

**トピック:**

* フォン・ノイマン マシンの基本的な構成
* 制御装置 - 命令のフェッチ・デコード・実行
* 命令セットと種類（データ操作、制御、I/O）
* アセンブリ/機械言語プログラミング
* 命令フォーマット
* アドレッシングモード
* サブルーチン呼び出しと復帰機構（相互参照: [PL/言語翻訳と実行](z_appendix_A_PL.md#pl言語翻訳と実行)）
* I/Oと割り込み
* ヒープ vs 静的領域 vs スタック vs コード領域
* 共有メモリマルチプロセッサ/マルチコアの構成
* SIMD vs MIMDとフリンの分類の紹介

**学習到達目標:**

1. 古典的フォン・ノイマン マシンの構成と主要な機能装置を説明する。[知識]
2. 古典的フォン・ノイマン マシンで命令が実行される方法を、次の拡張を含めて説明する。スレッド、マルチプロセッサ同期、SIMD実行 [知識]
3. 命令レベルの並列性とハザード、および典型的なプロセッサパイプラインでの管理方法を説明する。[知識]
4. 命令がマシンレベルとシンボリックアセンブラの文脈の両方でどのように表現されるかをまとめる。[知識]
5. 高レベル言語の典型をアセンブリ/機械語表記に対応させる方法を示す。[知識]
6. 命令毎アドレス数やや可変長・固定長フォーマットなど、さまざまな命令形式を説明する。[知識]
7. アセンブリレベルでサブルーチン呼び出しがどのように処理されるかを説明する。[知識]
8. 割り込みとI/O操作の基本的な概念を説明する。[知識]
9. 簡単なアセンブリ言語プログラムセグメントを作成する。[使用]
10. 基本的な高レベルプログラミング構造がマシン言語レベルでどのように実装されるかを示す。[使用]



## AR/メモリシステムの構成とアーキテクチャ
*[選択必修 3時間]*

相互参照: [OS/メモリ管理](z_appendix_A_OS.md#osメモリ管理), [OS/仮想マシン](z_appendix_A_OS.md#os仮想マシン)

**トピック:**

* 記憶装置とその技術
* メモリ階層: 時間的および空間的局所性の重要性
* 主記憶の構成と操作
* レイテンシ・サイクルタイム・帯域幅・インタリーブ
* キャッシュメモリ（アドレスマッピング、ブロックサイズ、置換および書き出し戦略）
* マルチプロセッサキャッシュの一貫性/メモリシステムを使用したコア間同期/アトミックなメモリ操作
* 仮想メモリ（ページテーブル、TLB）
* 障害対応と信頼性
* 誤り検出訂正符号・データ圧縮・データ整合性（相互参照: [SF/冗長化による信頼性向上](./z_appendix_SF#sf冗長化による信頼性向上))


**学習到達目標:**

* メモリ技術の主要な種類（例：SRAM、DRAM、フラッシュ、磁気ディスク）と、それらの相対的なコストと性能を特定する。 [知識]
* メモリのレイテンシが実行時間に与える影響を説明します。 [知識]
* メモリ階層（キャッシュ、仮想メモリ）の使用が、実効メモリレイテンシをどのように縮小するかを説明する。 [知識]
* メモリ管理の原則を説明する [知識]
* 仮想メモリ管理を持つシステムの仕組みを説明する。 [知識]
* キャッシュとメモリの様々な設定、および命令とデータ参照の組み合わせの下で、平均メモリアクセス時間を計算する。 [使用法]


## AR/インターフェースと通信
*[選択必修 1時間]*

オペレーティングシステム（OS）の知識領域との相互参照し、オペレーティングシステム視点での入出力処理と管理について議論します。
ここでは、デバイスインターフェイスのサポートとプロセッサ間通信のハードウェアメカニズムに焦点が当てられています。

**トピック:**
* I/Oの基本：ハンドシェイキング・バッファリング・プログラムI/O・割り込み駆動I/O
* 割り込み構造：割り込みベクタ・割り込み優先度・割り込み応答
* 外部ストレージ、物理的な構成・ドライブ
* バス：バスプロトコル・仲裁・ダイレクトメモリアクセス（DMA）
* ネットワークの導入：通信ネットワークはリモートアクセスの一レイヤー
* マルチメディア支援
* RAIDアーキテクチャ

**学習到達目標:**
1. I/O制御とデータ転送の実装に割り込みがどのように使用されるかを説明する。 [知識]
2. コンピュータシステム内のさまざまな種類のバスを特定する。 [知識]
3. 磁気ディスクドライブからのデータアクセスを説明します。 [知識]
4. イーサネット/バス、リング、スイッチ型 vs ルーティング型などの一般的なネットワーク組織を比較します。 [知識]
5. リモートストレージからの画像取得、通信ネットワークを介した転送、ローカルメモリへの読み込み、最終的な映像表示装置での表示まで、マルチメディアのアクセスから表示に必要なレイヤー間インターフェイスを特定します。 [知識]
6. RAIDアーキテクチャの利点と制限を説明します。 [知識]



## AR/機能別のハードウェア構成
*[選択科目]*

注: コンピュータ科学では選択科目ですが、コンピュータ工学のカリキュラムでは必須となります。

**トピック:**
* 命令パイプライン・ハザード検出および解決を含む簡単なデータパスの実装
* 制御装置: 結線論理方式 vs マイクロプログラム方式
* 命令パイプライン
* 命令レベルの並列性（ILP）の紹介

**学習到達目標:**
1. データパスの複数の可能な実装を比較する。[知識]
2. コントロールポイントの概念と、結線論理方式やマイクロプログラム方式での制御信号の生成について議論する。[知識]
3. パイプラインを使用した基本的な命令レベルの並列性と、発生する可能性がある主要なハザードを説明する。[知識]
4. データパスと制御を含む完全なプロセッサを設計および実装する。[使用]
5. 与えられたプロセッサとメモリシステム実装について、命令ごとの平均サイクル数を決定する。[評価]



## AR/マルチプロセッシングとその構成の選択肢
*[選択科目]*

ここでは、SIMDおよびMIMDアーキテクチャのハードウェア実装に焦点を当てています。
相互参照: [PD/並列アーキテクチャ](./z_appendix_A_PD#pd並列アーキテクチャ)

**トピック:**

* 電力の法則
* SIMD / MIMD 命令セットとアーキテクチャの例
* 相互結合網（ハイパーキューブ、シャッフル交換、メッシュ、クロスバー）
* 共有マルチプロセッサメモリシステムとメモリ一貫性
* マルチプロセッサキャッシュの整合性

**学習到達目標:**

1. 古典的フォン・ノイマンモデルを超えた並列処理の概念を議論する。[知識]
2. SIMDやMIMDなどの可能な並列アーキテクチャを説明する。[知識]
3. 相互結合網の概念を説明し、異なるアプローチを特徴付ける。[知識]
4. マルチプロセッシングシステムのメモリ管理に関する特別な懸念事項を議論し、それらがどのように対処されるかを説明する。[知識]
5. メモリバックプレーン、プロセッサメモリ相互接続、およびネットワーク経由のリモートメモリの違いを説明し、アクセス遅延の影響とプログラム性能への影響を説明する。[知識]


## AR/性能向上のための技術
*[選択科目]*

**トピック:**
* スーパースカラアーキテクチャ
* 分岐予測、投機実行、アウトオブオーダー実行
* 先読み
* ベクトルプロセッサとGPU
* マルチスレッディングのためのハードウェア支援
* スケーラビリティ
* VLIW/EPICなどその他の可能なアーキテクチャ、およびアクセラレーターやその他の特定用途プロセッサ

**学習到達目標:**
1. スーパースカラアーキテクチャとその利点を説明する。[知識]
2. 分岐予測の概念とその有用性を説明する。[知識]
3. 先読みのコストと利点を特徴づける。[知識]
4. 投機実行を説明し、それが正当化される条件を特定する。[知識]
5. アーキテクチャで提供するマルチスレッディングの性能上の利点と、このアプローチから最大利益を得るのが難しい要因を議論する。[知識]
6. スケーラビリティが性能にどのような影響を及ぼすかを説明する。[知識]
